clear;clc;
% % 数字投影30+20模板
% Model_2 = [0.42045,0.60227,0.72727,0.81818,0.625,  0.5,    0.44318,0.43181,0.40909,0.40909,0.38636,0.27272,0.20454,0.19318,0.22727,0.25,   0.27272,0.27272,0.29545,0.31818,0.31818,0.29545,0.27272,0.26136,0.25,  0.23863,0.23863,0.22727,0.21590,0.66148,0.28571,0.42207,0.5,    0.55194,0.55844,0.44805,0.40909,0.38311,0.36363,0.35064,0.34415,0.34415,0.33766,0.35714,0.36363,0.38311,0.40259,0.56493,0.64935,0.50432];
% Model_3 = [0.91666,0.9375, 0.91666,0.6875, 0.41666,0.41666,0.40625,0.41666,0.36458,0.22916,0.22916,0.25,   0.40625,0.53125,0.625,  0.58333,0.35416,0.20833,0.20833,0.1875, 0.19791,0.1875, 0.1875, 0.1875, 0.1875,0.1875, 0.19791,0.22916,0.32291,0.50911,0.33108,0.38513,0.42567,0.39864,0.25675,0.29054,0.32432,0.34459,0.34459,0.35811,0.37162,0.39864,0.42567,0.44594,0.45945,0.47297,0.49324,0.5,    0.52702,0.46756];
% Model_4 = [0.22093,0.24418,0.27906,0.31395,0.33720,0.36046,0.39534,0.41860,0.45348,0.45348,0.45348,0.45348,0.43023,0.44186,0.45348,0.44186,0.44186,0.44186,0.44186,0.44186,0.44186,0.44186,0.43023,0.75581,1,     1,      1,      0.61627,0.20930,0.32421,0.12666,0.17333,0.21333,0.26,   0.3    ,0.32666,0.31333,0.32666,0.32,   0.32,   0.32666,0.36,   0.43333,0.43333,0.74666,1,      1,      1,      1,      0.208];
% Model_5 = [0.84091,0.86363,0.86363,0.85227,0.21590,0.20454,0.20454,0.20454,0.20454,0.20454,0.32954,0.65909,0.77272,0.82954,0.65909,0.47727,0.38636,0.30681,0.21590,0.20454,0.20454,0.19318,0.18181,0.18181,0.1818,0.18181,0.18181,0.20454,0.20454,0.48863,0.35897,0.60256,0.60897,0.57692,0.53205,0.33974,0.30769,0.3141, 0.30128,0.29487,0.29487,0.30128,0.32051,0.33333,0.35256,0.37179,0.41025,0.50641,0.66025,0.43162];
% Model_6 = [0.29787,0.51063,0.61702,0.63829,0.46808,0.40425,0.36171,0.26595,0.19148,0.17021,0.15957,0.17021,0.31914,0.57446,0.71276,0.79787,0.70212,0.57446,0.52127,0.45744,0.43617,0.41489,0.40425,0.39361,0.3829,0.37234,0.3617, 0.37234,0.38297,0.46136,0.33766,0.57792,0.70129,0.77922,0.77922,0.51948,0.42857,0.37662,0.33116,0.2987, 0.29221,0.27922,0.27922,0.2987, 0.32467,0.32467,0.36363,0.3961, 0.50649,0.46031];
% Model_7 = [0.95238,1,      1,      0.73809,0.44047,0.44047,0.45238,0.45238,0.30952,0.22619,0.22619,0.21428,0.21428,0.22619,0.21428,0.21428,0.20238,0.19047,0.20238,0.21428,0.20238,0.21428,0.21428,0.21428,0.2142,0.21428,0.21428,0.22619,0.21428,0.20308,0.21333,0.22666,0.22666,0.22666,0.16,   0.15333,0.28,   0.39333,0.48,   0.51333,0.46666,0.44666,0.40666,0.38666,0.36666,0.35333,0.36666,0.31333,0.26666,0.17666];
% Model_8 = [0.34693,0.5102, 0.62244,0.59183,0.40816,0.35714,0.31632,0.30612,0.30612,0.28571,0.30612,0.31632,0.33673,0.38775,0.42857,0.62244,0.61224,0.53061,0.5102, 0.61224,0.71428,0.5,    0.41836,0.38775,0.3469,0.33673,0.35714,0.32653,0.32653,0.46079,0.16233,0.36363,0.55194,0.70779,0.66233,0.51948,0.46103,0.42857,0.37012,0.36363,0.33116,0.32467,0.32467,0.32467,0.33766,0.38311,0.3961, 0.45454,0.51948,0.49232];
% Model_9 = [0.25531,0.45744,0.57446,0.65957,0.53191,0.46808,0.41489,0.41489,0.38297,0.39361,0.38297,0.38297,0.38297,0.38297,0.38297,0.39361,0.39361,0.42553,0.44681,0.48936,0.51063,0.61702,0.75531,0.79787,0.7127,0.53191,0.2553, 0.18085,0.17021,0.38857,0.20779,0.37662,0.51298,0.61688,0.58441,0.43506,0.38961,0.34415,0.31818,0.30519,0.2987, 0.2987, 0.2987 ,0.31168,0.32467,0.35714,0.38961,0.48701,0.64935,0.61616];
% Model_10 =[0.31914,0.59574,0.68085,0.74468,0.65957,0.58511,0.56382,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.55319,0.5532,0.55319,0.55319,0.55319,0.55319,0.60471,0.97402,0.98701,0.98701,0.98701,0.48051,0,      0,      0,      0.35714,0.81818,0.8961, 0.94155,0.96753,0.25324,0.21428,0.19481,0.19481,0.22077,0.25324,0.83116];
% % 花色投影模板 R--红桃 B--黑桃 F--方片 M--梅花
% Model_R = [0.2439, 0.4878, 0.60975,0.70731,0.78048,0.82926,0.85365,0.90243,0.92682,0.97561,1,      1,      1,      1,      1,      1,      1,      0.97561,0.95121,0.92682,0.90243,0.90243,0.85365,0.82926,0.80487,0.78048,0.75609,0.68292,0.68292,0.44947,0.25581,0.44186,0.56976,0.66279,0.76744,0.83721,0.89534,0.96511,0.94186,0.83721,0.77906,0.88372,0.93023,0.89534,0.84883,0.77906,0.7093, 0.60465,0.51162,0.33333];
% Model_B = [0.23684,0.26315,0.31578,0.34211,0.36842,0.42105,0.44736,0.47368,0.52631,0.57894,0.63157,0.65789,0.68421,0.73684,0.76315,0.78947,0.84211,0.86842,0.89473,0.94736,0.94736,0.97368,1,      1,      1,      1,      1,      1,      1,      0.44078,0.22222,0.31111,0.35555,0.42222,0.46666,0.51111,0.53333,0.57777,0.6,    0.62222,0.64444,0.68888,0.68888,0.71111,0.73333,0.77777,0.8,    1,      1,      0.61988];
% Model_F = [0.3,    0.36666,0.36666,0.43333,0.5,    0.5,    0.56666,0.63333,0.7,    0.73333,0.76666,0.83333,0.9,    0.96666,1,      1,      1,      1,      1,      1,      1,      1,      1,      1,      0.96666,0.9,    0.83333,0.76666,0.7,    0.47037,0.26315,0.31578,0.36842,0.42105,0.47368,0.55263,0.63157,0.68421,0.76315,0.81578,0.94736,1,      1,      1,      1,      1,      1,      1,      1,      0.64114];
% Model_M = [0.24444,0.28888,0.33333,0.37777,0.4,    0.44444,0.46666,0.46666,0.46666,0.48888,0.48888,0.46666,0.46666,0.46666,0.46666,0.42222,0.37777,0.37777,0.33333,0.66666,0.77777,0.86666,0.91111,0.95555,0.95555,1,      1,      1,      1,      0.51746,0.23,   0.3,    0.38,   0.42,   0.42,   0.44,   0.64,   0.71,   0.74,   0.8,    0.96,   1,      0.85,   0.77,   0.7,    0.66,   0.51,   0.42,   0.42,   0.32571];

A = imread('../images/M_5.JPG');

% 分辨数字
% 三个参数分别代表：行数，列数，RGB三值(彩色图像固定为3)
% 比例是调出来的 ^_^
[x,y,z] = size(A);
Number_Left_Top = A(1 : x/6, 1 : y/6, 1 : z);
Shape_Left_Top = A(x/6 : x/2, 1 : y/6, 1 : z);
% 截取图像
Number_BW = CutImage(Number_Left_Top);
Shape_BW = CutImage(Shape_Left_Top); 
% 获取投影模板
Number_Model = GetModel(Number_BW);
Shape_Model = GetModel(Shape_BW);

% 解析花色
% 解析数字

subplot(2,2,1),imshow(A),title('源图像');
subplot(2,2,2),imshow(Number_BW),title('左上角数字二值化图像');
subplot(2,2,3),imshow(Shape_BW),title('左上角花色二值化图像');
